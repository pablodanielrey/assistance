<div class="reporte">

    <div class="seccionSistema">
      <button mat-button class="btnVolverSeccion" disabled><mat-icon>keyboard_arrow_left</mat-icon> volver</button>
       | Reportes
    </div>

    <mat-divider></mat-divider>

    <div class="contenidoPantalla">

      <div class="cabeceraReporte">

            <mat-list *ngIf='reporte.usuario' class="usuario">
                <mat-list-item class="itemLista">
                  <img matListAvatar src="https://i.pinimg.com/originals/1d/52/88/1d528825423bbfc1fe82dde5c871962d.jpg">
                  <h3 matLine> Nombre Apellido </h3>
                  <p matLine>
                    <span class="itemTextoSubtitulo">{{reporte.usuario.dni}}</span>
                  </p>
                </mat-list-item>
            </mat-list>


            <div>
                  <mat-form-field class="contenidoFecha">
                      <mat-placeholder>Fecha Inicio</mat-placeholder>
                    <input matInput [matDatepicker]="datePickerInicio" [(ngModel)]="fecha_inicial">
                    <mat-datepicker-toggle matSuffix [for]="datePickerInicio"></mat-datepicker-toggle>
                    <mat-datepicker #datePickerInicio></mat-datepicker>
                  </mat-form-field>


                  <mat-form-field class="contenidoFecha">
                    <mat-placeholder>Fecha Fin</mat-placeholder>
                    <input matInput [matDatepicker]="datePickerFin" [(ngModel)]="fecha_final">
                    <mat-datepicker-toggle matSuffix [for]="datePickerFin"></mat-datepicker-toggle>
                    <mat-datepicker #datePickerFin></mat-datepicker>
                  </mat-form-field>

                  <button mat-button class="btnClasico" (click)='generarReporte()'>BUSCAR</button>

            </div>

      </div>

      <div *ngIf='reporte'>
      <mat-table [dataSource]='reporte.reportes' matSort>

        <ng-container matColumnDef='Dia'>
          <mat-header-cell *matHeaderCellDef mat-sort-header> Dia </mat-header-cell>
          <mat-cell *matCellDef='let renglon'> {{renglon.fecha | date: 'EEE'}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef='Fecha'>
          <mat-header-cell *matHeaderCellDef mat-sort-header> Fecha </mat-header-cell>
          <mat-cell *matCellDef='let renglon'> {{renglon.fecha | date: 'dd/MM/yyyy'}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef='Horario'>
          <mat-header-cell *matHeaderCellDef mat-sort-header> Horario </mat-header-cell>
          <mat-cell *matCellDef='let renglon'> {{obtenerHorario(renglon)}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef='Entrada'>
          <mat-header-cell *matHeaderCellDef mat-sort-header> Entrada </mat-header-cell>
          <mat-cell *matCellDef='let renglon'> {{obtenerMarcacion(renglon.entrada) | date:'HH:mm'}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef='Salida'>
          <mat-header-cell *matHeaderCellDef mat-sort-header> Salida </mat-header-cell>
          <mat-cell *matCellDef='let renglon'> {{obtenerMarcacion(renglon.salida) | date:'HH:mm'}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef='Horas_trabajadas'>
          <mat-header-cell *matHeaderCellDef mat-sort-header> Horas Trabajadas </mat-header-cell>
          <mat-cell *matCellDef='let renglon'> {{obtenerHorasTrabajadas(renglon)}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef='Justificacion'>
          <mat-header-cell *matHeaderCellDef mat-sort-header> Justificacion </mat-header-cell>
          <mat-cell *matCellDef='let renglon'>
            <div *ngIf='renglon.justificacion'> {{renglon.justificacion }} </div>
            <button *ngIf='!renglon.justificacion' mat-button routerLink="" [queryParams]="{ fecha: renglon.fecha }">Justificar</button>
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="['Dia','Fecha','Horario','Entrada','Salida','Horas_trabajadas','Justificacion']"></mat-header-row>
        <mat-row *matRowDef="let row; columns: ['Dia','Fecha','Horario','Entrada','Salida','Horas_trabajadas','Justificacion']"></mat-row>
      </mat-table>
      </div>







    </div>

</div>




<!--
<tr>
  <th>Usuario</th>
  <th>Día</th>
  <th>Fecha</th>
  <th>Horario</th>
  <th>Entrada</th>
  <th>Salida</th>
  <th>Horas trabajadas</th>
  <th>Justificación</th>
</tr>
<tr *ngFor="let r of obtenerReportes()" class="mdc-list-item">
  <td>{{obtenerUsuario()}}</td>
  <td> {{r.fecha | date: 'EEE'}} </td>
  <td> {{r.fecha | date: 'dd/MM/yyyy'}} </td>
  <td> {{obtenerHorario(r)}} </td>
  <td> {{obtenerMarcacion(r.entrada) | date:'shortTime'}} </td>
  <td> {{obtenerMarcacion(r.salida) | date:'shortTime'}} </td>
  <td> {{ obtenerHorasTrabajadas(r) }}</td>
  <td *ngIf="r.justificacion"> {{ r.justificacion  }}</td>
  <td *ngIf="r.justificacion == null"> <button routerLink="" [queryParams]="{ fecha: r.fecha }">Justificar</button></td>

</tr>
-->
